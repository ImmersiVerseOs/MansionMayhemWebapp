/* ============================================================
   MANSION MAYHEM — ELECTRIC CANDY (RESPONSIVE)
   Desktop base + mobile overrides.
   Desktop: sidebar nav, wide layouts, big fonts.
   Mobile (<768px): no sidebar, full-width, compact.
   ============================================================ */
@import url('https://fonts.googleapis.com/css2?family=Unbounded:wght@400;500;600;700;800;900&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&display=swap');

:root {
  --bg: #0C0418;
  --bg2: #130824;
  --card: rgba(255,255,255,0.035);
  --card-h: rgba(255,255,255,0.06);
  --elevated: rgba(255,255,255,0.055);
  --input-bg: rgba(255,255,255,0.045);
  --pink: #FF3264; --pink-s: rgba(255,50,100,0.14);
  --orange: #FF6B2B; --orange-s: rgba(255,107,43,0.14);
  --gold: #FFB800; --gold-s: rgba(255,184,0,0.14);
  --cyan: #00E5FF; --cyan-s: rgba(0,229,255,0.12);
  --green: #00DC82; --green-s: rgba(0,220,130,0.12);
  --purple: #A855F7; --purple-s: rgba(168,85,247,0.12);
  --red: #FF4757; --red-s: rgba(255,71,87,0.12);
  --grad-fire: linear-gradient(135deg, #FF3264 0%, #FF6B2B 50%, #FFB800 100%);
  --grad-pink: linear-gradient(135deg, #FF3264 0%, #FF6B9D 100%);
  --grad-ice: linear-gradient(135deg, #00E5FF 0%, #A855F7 100%);
  --grad-gold: linear-gradient(135deg, #FFB800 0%, #FF6B2B 100%);
  --grad-green: linear-gradient(135deg, #00DC82 0%, #00E5FF 100%);
  --text: #FFFFFF; --text2: rgba(255,255,255,0.55); --text3: rgba(255,255,255,0.25);
  --border: rgba(255,255,255,0.06); --border-h: rgba(255,255,255,0.12);
  --glow-pink: 0 8px 32px rgba(255,50,100,0.25), 0 0 80px rgba(255,50,100,0.08);
  --glow-cyan: 0 8px 32px rgba(0,229,255,0.2);
  --glow-gold: 0 8px 32px rgba(255,184,0,0.2);
  --r: 16px; --r-sm: 12px; --r-pill: 100px;
  --font: 'DM Sans', system-ui, sans-serif;
  --font-display: 'Unbounded', sans-serif;
  --sidebar-w: 240px;
}

/* === RESET === */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{font-size:16px;-webkit-text-size-adjust:100%}
body{font-family:var(--font);background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden;line-height:1.5;-webkit-font-smoothing:antialiased}
a{color:var(--pink);text-decoration:none}
img{max-width:100%;display:block}
button{font-family:var(--font);cursor:pointer}
input,textarea,select{font-family:var(--font)}

/* === PAGE WITH SIDEBAR === */
.page{min-height:100vh;background:linear-gradient(170deg,#0C0418 0%,#130824 40%,#0F0620 70%,#080214 100%);position:relative;overflow:hidden}

/* Animated orbs */
.page::before{content:'';position:fixed;width:500px;height:500px;border-radius:50%;background:radial-gradient(circle,rgba(255,50,100,0.1) 0%,transparent 70%);top:-150px;right:-100px;filter:blur(60px);animation:orb1 14s ease-in-out infinite;pointer-events:none;z-index:0}
.page::after{content:'';position:fixed;width:400px;height:400px;border-radius:50%;background:radial-gradient(circle,rgba(0,229,255,0.07) 0%,transparent 70%);bottom:-100px;left:-80px;filter:blur(50px);animation:orb2 17s ease-in-out infinite;pointer-events:none;z-index:0}
@keyframes orb1{0%,100%{transform:translate(0,0) scale(1)}50%{transform:translate(-60px,80px) scale(1.2)}}
@keyframes orb2{0%,100%{transform:translate(0,0) scale(1)}50%{transform:translate(70px,-50px) scale(1.25)}}
.orb3{position:fixed;width:350px;height:350px;border-radius:50%;background:radial-gradient(circle,rgba(255,184,0,0.05) 0%,transparent 70%);top:40%;left:40%;filter:blur(60px);animation:orb3 20s ease-in-out infinite;pointer-events:none;z-index:0}
@keyframes orb3{0%,100%{transform:translate(-50%,-50%) scale(1)}33%{transform:translate(-30%,-60%) scale(1.3)}66%{transform:translate(-70%,-40%) scale(0.9)}}

/* === SIDEBAR NAV === */
.sidebar{position:fixed;top:0;left:0;bottom:0;width:var(--sidebar-w);background:rgba(12,4,24,0.7);backdrop-filter:blur(24px);border-right:1px solid var(--border);z-index:100;display:flex;flex-direction:column;padding:1.5rem 0}
.sidebar-brand{padding:0 1.25rem 1.5rem;display:flex;align-items:center;gap:0.6rem}
.sidebar-brand-icon{font-size:1.5rem}
.sidebar-brand-text{font-family:var(--font-display);font-weight:800;font-size:0.95rem}
.sidebar-nav{flex:1;display:flex;flex-direction:column;gap:2px;padding:0 0.75rem}
.sidebar-link{display:flex;align-items:center;gap:0.7rem;padding:0.7rem 0.75rem;border-radius:var(--r-sm);color:var(--text3);font-size:0.85rem;font-weight:500;transition:all 0.15s;text-decoration:none;border:1px solid transparent}
.sidebar-link:hover{background:var(--card);color:var(--text2);border-color:var(--border)}
.sidebar-link.on{background:var(--pink-s);color:var(--pink);border-color:rgba(255,50,100,0.12)}
.sidebar-link-icon{font-size:1.15rem;width:24px;text-align:center}
.sidebar-link-text{font-weight:600}
.sidebar-divider{height:1px;background:var(--border);margin:0.75rem 1.25rem}
.sidebar-footer{padding:0.75rem 1.25rem}
.sidebar-user{display:flex;align-items:center;gap:0.6rem;padding:0.6rem;border-radius:var(--r-sm);background:var(--card);border:1px solid var(--border)}
.sidebar-user-av{width:34px;height:34px;border-radius:50%;background:var(--elevated);display:flex;align-items:center;justify-content:center;font-size:1.1rem;border:2px solid var(--border);flex-shrink:0}
.sidebar-user-name{font-weight:600;font-size:0.8rem;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.sidebar-user-out{background:none;border:none;color:var(--text3);font-size:0.7rem;cursor:pointer;font-family:var(--font);padding:0.2rem 0.4rem;border-radius:4px}
.sidebar-user-out:hover{color:var(--red)}

/* Pill badge on sidebar links */
.sidebar-badge{margin-left:auto;padding:0.1rem 0.45rem;border-radius:var(--r-pill);font-family:var(--font-display);font-size:0.55rem;font-weight:700}

/* === MAIN CONTENT (offset by sidebar) === */
.main{margin-left:var(--sidebar-w);min-height:100vh;position:relative;z-index:1}
.container{max-width:900px;margin:0 auto;padding:2rem 2.5rem}
.container-wide{max-width:1200px;margin:0 auto;padding:2rem 2.5rem}
.container-narrow{max-width:600px;margin:0 auto;padding:2rem 2.5rem}

/* === TYPOGRAPHY === */
.display-xl{font-family:var(--font-display);font-size:3.5rem;font-weight:900;line-height:0.95;letter-spacing:-0.03em}
.display-lg{font-family:var(--font-display);font-size:2.2rem;font-weight:800;line-height:1;letter-spacing:-0.02em}
.display-md{font-family:var(--font-display);font-size:1.5rem;font-weight:700;letter-spacing:-0.01em}
.display-sm{font-family:var(--font-display);font-size:1.1rem;font-weight:700}
.body-lg{font-size:1rem;color:var(--text2);line-height:1.6}
.body-md{font-size:0.9rem;color:var(--text2)}
.body-sm{font-size:0.8rem;color:var(--text3)}
.label{font-family:var(--font-display);font-size:0.65rem;font-weight:700;text-transform:uppercase;letter-spacing:0.1em}
.fire-text{background:var(--grad-fire);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.ice-text{background:var(--grad-ice);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}

/* === BUTTONS === */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;border:none;font-family:var(--font-display);font-weight:700;font-size:0.85rem;transition:all 0.2s ease;position:relative;overflow:hidden}
.btn:active{transform:scale(0.97)}
.btn-fire{padding:0.9rem 2rem;border-radius:var(--r);background:var(--grad-fire);color:#fff;box-shadow:var(--glow-pink);font-size:0.95rem}
.btn-fire:hover{transform:translateY(-2px);box-shadow:0 12px 40px rgba(255,50,100,0.4),0 0 80px rgba(255,107,43,0.15)}
.btn-glass{padding:0.75rem 1.5rem;border-radius:var(--r);background:var(--card);border:1px solid var(--border);color:var(--text);backdrop-filter:blur(8px)}
.btn-glass:hover{background:var(--card-h);border-color:var(--border-h)}
.btn-outline{padding:0.75rem 1.5rem;border-radius:var(--r);background:none;border:1px solid var(--border);color:var(--text2)}
.btn-outline:hover{border-color:var(--pink);color:var(--pink)}
.btn-sm{padding:0.5rem 1rem;font-size:0.75rem;border-radius:var(--r-sm)}
.btn-lg{padding:1.1rem 2.5rem;font-size:1rem}
.btn-block{width:100%;display:flex}
.btn-pill{border-radius:var(--r-pill)}
.btn-icon{width:42px;height:42px;padding:0;border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center}
.btn-cyan{background:var(--grad-ice);box-shadow:var(--glow-cyan)}
.btn-gold{background:var(--grad-gold);color:#000;box-shadow:var(--glow-gold)}
.btn-green{background:var(--grad-green);color:#000}
.btn-danger{background:var(--red);color:#fff}

/* === CARDS === */
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:1.5rem;backdrop-filter:blur(4px);transition:border-color 0.2s}
.card:hover{border-color:var(--border-h)}
.card-glow-pink{box-shadow:var(--glow-pink);border-color:rgba(255,50,100,0.15)}
.card-glow-cyan{box-shadow:var(--glow-cyan);border-color:rgba(0,229,255,0.12)}
.card-glow-gold{box-shadow:var(--glow-gold);border-color:rgba(255,184,0,0.12)}
.card-accent{position:relative;overflow:hidden}
.card-accent::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--grad-fire)}

/* === INPUTS === */
.input{width:100%;padding:0.85rem 1rem;border-radius:var(--r-sm);background:var(--input-bg);border:1px solid var(--border);color:var(--text);font-size:0.9rem;outline:none;transition:all 0.2s;backdrop-filter:blur(4px)}
.input:focus{border-color:var(--pink);box-shadow:0 0 0 3px rgba(255,50,100,0.1)}
.input::placeholder{color:var(--text3)}
.input-code{text-align:center;font-family:var(--font-display);font-size:1.4rem;letter-spacing:0.25em;font-weight:700}
.input-lg{padding:1rem 1.25rem;font-size:1rem}

/* === PILLS === */
.pill{display:inline-flex;align-items:center;gap:0.3rem;padding:0.3rem 0.7rem;border-radius:var(--r-pill);font-family:var(--font-display);font-size:0.6rem;font-weight:700;text-transform:uppercase;letter-spacing:0.06em}
.pill-pink{background:var(--pink-s);color:var(--pink);border:1px solid rgba(255,50,100,0.2)}
.pill-cyan{background:var(--cyan-s);color:var(--cyan);border:1px solid rgba(0,229,255,0.15)}
.pill-gold{background:var(--gold-s);color:var(--gold);border:1px solid rgba(255,184,0,0.15)}
.pill-green{background:var(--green-s);color:var(--green);border:1px solid rgba(0,220,130,0.15)}
.pill-purple{background:var(--purple-s);color:var(--purple);border:1px solid rgba(168,85,247,0.15)}
.pill-red{background:var(--red-s);color:var(--red);border:1px solid rgba(255,71,87,0.15)}
.pill-ghost{background:var(--card);color:var(--text3);border:1px solid var(--border)}
.live-dot{width:6px;height:6px;border-radius:50%;background:currentColor;animation:live-pulse 1.5s ease infinite}
@keyframes live-pulse{0%,100%{opacity:1;box-shadow:0 0 0 0 currentColor}50%{opacity:0.6;box-shadow:0 0 0 5px transparent}}

/* === AVATAR === */
.av{width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.4rem;flex-shrink:0;border:2px solid var(--border);background:var(--card)}
.av-sm{width:34px;height:34px;font-size:1.1rem}
.av-lg{width:64px;height:64px;font-size:2.2rem}
.av-xl{width:88px;height:88px;font-size:3rem;border-width:3px}
.av-pink{border-color:rgba(255,50,100,0.4)}.av-gold{border-color:rgba(255,184,0,0.4)}.av-green{border-color:rgba(0,220,130,0.4)}.av-cyan{border-color:rgba(0,229,255,0.4)}

/* === STATS === */
.stats{display:flex;gap:0.75rem}
.stat{flex:1;background:var(--card);border:1px solid var(--border);border-radius:var(--r-sm);padding:1rem;text-align:center}
.stat-val{font-family:var(--font-display);font-size:1.8rem;font-weight:800}
.stat-lbl{font-size:0.6rem;color:var(--text3);text-transform:uppercase;letter-spacing:0.08em;margin-top:0.15rem}

/* === ROW === */
.row{display:flex;align-items:center;gap:0.75rem;padding:0.75rem;background:var(--card);border:1px solid var(--border);border-radius:var(--r-sm);transition:all 0.15s}
.row:hover{background:var(--card-h);border-color:var(--border-h)}
.row+.row{margin-top:0.5rem}

/* === DRAMA METER === */
.drama-track{height:5px;background:rgba(255,255,255,0.04);border-radius:3px;overflow:hidden}
.drama-fill{height:100%;border-radius:3px;transition:width 0.5s ease,background 0.5s ease}

/* === GRID LAYOUTS (desktop) === */
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem}
.grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:0.75rem}
.split{display:grid;grid-template-columns:1fr 380px;gap:1.5rem;align-items:start}
.split-reverse{display:grid;grid-template-columns:380px 1fr;gap:1.5rem;align-items:start}

/* === CHAT (desktop — taller) === */
.bubble{max-width:65%;padding:0.65rem 0.9rem;border-radius:var(--r) var(--r) var(--r) 4px;background:var(--card);border:1px solid var(--border);font-size:0.85rem;line-height:1.45}
.bubble.mine{margin-left:auto;border-radius:var(--r) var(--r) 4px var(--r);background:rgba(255,50,100,0.08);border-color:rgba(255,50,100,0.12)}
.bubble.director{background:rgba(255,184,0,0.06);border-color:rgba(255,184,0,0.15);border-left:3px solid var(--gold);font-style:italic;color:var(--gold);max-width:100%}
.bubble-name{font-family:var(--font-display);font-size:0.6rem;font-weight:700;margin-bottom:0.2rem}
.bubble-time{font-size:0.6rem;color:var(--text3);margin-top:0.2rem;text-align:right}

/* === LOADING / OVERLAYS === */
.loading{position:fixed;inset:0;z-index:300;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem}
.spinner{width:36px;height:36px;border:3px solid var(--border);border-top-color:var(--pink);border-radius:50%;animation:spin 0.7s linear infinite}
.loading-text{color:var(--text2);font-size:0.9rem}
.overlay{display:none;position:fixed;inset:0;z-index:200;background:rgba(0,0,0,0.6);backdrop-filter:blur(10px);justify-content:center;align-items:center;padding:2rem}
.overlay.on{display:flex;animation:fadeIn 0.25s ease}
.modal{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);padding:2.5rem;max-width:480px;width:100%;box-shadow:0 24px 64px rgba(0,0,0,0.5)}
.empty{text-align:center;padding:3rem 1rem;color:var(--text3)}
.empty-icon{font-size:2.5rem;margin-bottom:0.5rem}

/* === ANIMATIONS === */
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{transform:translateY(24px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes slideDown{from{transform:translateY(-16px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes scaleIn{from{transform:scale(0.9);opacity:0}to{transform:scale(1);opacity:1}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
@keyframes glow-breathe{0%,100%{box-shadow:0 0 20px rgba(255,50,100,0.15)}50%{box-shadow:0 0 40px rgba(255,50,100,0.3)}}
@keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-4px)}40%{transform:translateX(4px)}60%{transform:translateX(-3px)}80%{transform:translateX(2px)}}
@keyframes confetti{0%{transform:translateY(0) rotate(0deg);opacity:1}100%{transform:translateY(400px) rotate(720deg);opacity:0}}
.anim{animation:slideUp 0.4s ease both}
.anim-d1{animation-delay:0.05s}.anim-d2{animation-delay:0.1s}.anim-d3{animation-delay:0.15s}
.anim-d4{animation-delay:0.2s}.anim-d5{animation-delay:0.25s}.anim-d6{animation-delay:0.3s}
.anim-scale{animation:scaleIn 0.3s ease both}
.anim-float{animation:float 3s ease-in-out infinite}

/* ============================================================
   MOBILE OVERRIDES (< 768px)
   No sidebar, full-width, compact mobile layout.
   ============================================================ */
@media (max-width: 767px) {
  :root {
    --sidebar-w: 0px;
  }

  body {
    min-height: 100dvh;
  }

  .page {
    min-height: 100dvh;
  }

  /* Hide sidebar on mobile */
  .sidebar {
    display: none;
  }

  /* Main content takes full width */
  .main {
    margin-left: 0;
  }

  /* Container: mobile-width, compact padding */
  .container {
    max-width: 440px;
    padding: 0 1.25rem;
  }
  .container-wide {
    max-width: 440px;
    padding: 0 1.25rem;
  }
  .container-narrow {
    max-width: 440px;
    padding: 0 1.25rem;
  }

  /* Smaller orb blobs */
  .page::before {
    width: 300px;
    height: 300px;
    top: -80px;
    right: -80px;
    filter: blur(40px);
    background: radial-gradient(circle, rgba(255,50,100,0.12) 0%, transparent 70%);
    animation: orb1 12s ease-in-out infinite;
  }
  .page::after {
    width: 250px;
    height: 250px;
    bottom: -60px;
    left: -60px;
    filter: blur(40px);
    background: radial-gradient(circle, rgba(0,229,255,0.08) 0%, transparent 70%);
    animation: orb2 15s ease-in-out infinite;
  }
  .orb3 {
    width: 200px;
    height: 200px;
    filter: blur(50px);
    background: radial-gradient(circle, rgba(255,184,0,0.06) 0%, transparent 70%);
    animation: orb3 18s ease-in-out infinite;
  }

  /* Smaller typography */
  .display-xl { font-size: 2.8rem; }
  .display-lg { font-size: 2rem; }
  .display-md { font-size: 1.35rem; }
  .display-sm { font-size: 1rem; }
  .body-lg { font-size: 0.95rem; line-height: 1.5; }
  .body-md { font-size: 0.85rem; }
  .body-sm { font-size: 0.75rem; }
  .label { font-size: 0.6rem; }

  /* Mobile button tweaks */
  .btn:active { transform: scale(0.96); }
  .btn-fire { padding: 1rem 1.75rem; }
  .btn-glass { padding: 0.8rem 1.5rem; }
  .btn-outline { padding: 0.8rem 1.5rem; }
  .btn-sm { padding: 0.55rem 1rem; }

  /* Smaller cards */
  .card { padding: 1.25rem; }

  /* Input tweaks */
  .input-code { font-size: 1.3rem; }

  /* Smaller avatars */
  .av-lg { width: 60px; height: 60px; font-size: 2rem; }
  .av-xl { width: 80px; height: 80px; font-size: 2.8rem; }

  /* Compact stats */
  .stats { gap: 0.5rem; }
  .stat { padding: 0.7rem; }
  .stat-val { font-size: 1.5rem; }
  .stat-lbl { font-size: 0.55rem; }

  /* Compact rows */
  .row { gap: 0.7rem; padding: 0.7rem; }
  .row+.row { margin-top: 0.4rem; }

  /* Single-column grids on mobile */
  .grid-2 { grid-template-columns: 1fr; }
  .grid-3 { grid-template-columns: 1fr; }
  .grid-4 { grid-template-columns: 1fr 1fr; }
  .split { grid-template-columns: 1fr; }
  .split-reverse { grid-template-columns: 1fr; }

  /* Wider chat bubbles on mobile */
  .bubble { max-width: 80%; font-size: 0.82rem; line-height: 1.4; }

  /* Compact modal */
  .overlay { padding: 1.5rem; }
  .modal { border-radius: var(--r); padding: 2rem; max-width: 380px; }

  /* Loading text */
  .loading-text { font-size: 0.85rem; }

  /* Mobile touch-friendly: no hover effects */
  .card:hover { border-color: var(--border); }
  .row:hover { background: var(--card); border-color: var(--border); }

  /* Chat-shell pages: full width on mobile */
  .chat-shell {
    margin-left: 0;
    height: 100dvh;
  }

  /* Game layout: stack on mobile */
  .g-layout {
    grid-template-columns: 1fr;
    margin-left: 0;
  }
  .g-top {
    left: 0;
  }

  /* Mobile nav bar (from mobile version) */
  .nav{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(12,4,24,0.88);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0.65rem 1rem;display:flex;align-items:center;gap:0.6rem}
  .nav-title{font-family:var(--font-display);font-weight:700;font-size:0.9rem;flex:1}
  .nav-back{background:none;border:none;color:var(--text2);font-size:1.3rem;padding:0.25rem;line-height:1}
  .padded{padding-top:3.75rem;padding-bottom:5.5rem}

  /* Mobile tab bar */
  .tabs{position:fixed;bottom:0;left:0;right:0;z-index:100;background:rgba(12,4,24,0.92);backdrop-filter:blur(20px);border-top:1px solid var(--border);display:flex;justify-content:space-around;padding:0.35rem 0;padding-bottom:max(0.35rem,env(safe-area-inset-bottom))}
  .tab{display:flex;flex-direction:column;align-items:center;gap:1px;background:none;border:none;color:var(--text3);padding:0.3rem 0.5rem;font-size:0.55rem;font-weight:600;font-family:var(--font);transition:color 0.2s;cursor:pointer;text-decoration:none}
  .tab-icon{font-size:1.15rem}
  .tab.on{color:var(--pink)}

  /* Landing page mobile: stack vertically */
  .landing {
    grid-template-columns: 1fr;
  }
  .landing-left {
    padding: 2rem 1.25rem;
  }
  .landing-right {
    padding: 1.5rem 1.25rem;
    border-left: none;
    border-top: 1px solid var(--border);
  }
}
